# ManuscriptSpreadView: Component Design

> **Note:** This component replaces both `ManuscriptDummyView` and `ManuscriptFinalizationView` by unifying them into a single configurable component. Used by Prose Dummy, Poetry Dummy, and Finalization steps.

**Screenshots:**
- Edit mode: `component/editor-page/screenshots/manuscript-edit-view.png`
- Grid mode: `component/editor-page/screenshots/manuscript-grid-view.png`

---

## 1. Diagrams

### 1.1 Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ManuscriptSpreadView                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SpreadViewHeader                                                          â”‚  â”‚
â”‚  â”‚  [âš]  â˜‘ Show full spread view              â”€ â—â”€â”€â”€â”€â”€â”€ + 100% (or 4 cols)   â”‚  â”‚
â”‚  â”‚   â†‘ toggle   â†‘ checkbox (grid mode only)       â†‘ dual-purpose slider      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SWITCH viewMode:                                                          â”‚  â”‚
â”‚  â”‚                                                                            â”‚  â”‚
â”‚  â”‚  'edit': SpreadEditorPanel + SpreadThumbnailList (horizontal)              â”‚  â”‚
â”‚  â”‚  'grid': SpreadThumbnailList (grid layout)                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Layout States

**State A: Edit Mode (viewMode: 'edit')**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš]                                           â”€ â—â”€â”€â”€â”€â”€â”€ + 100% â”‚  â† Header (zoom: 25%-200%)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                     â”‚   SpreadEditorPanel   â”‚                   â”‚  â† ~70% height
â”‚                     â”‚   (SpreadCanvas)      â”‚                   â”‚
â”‚                     â”‚   zoom applied here   â”‚                   â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â” â•”â•â•â•â•â•— â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                    â”‚  â† ~20% height
â”‚  â”‚0-1 â”‚ â•‘2-3 â•‘ â”‚4-5 â”‚ â”‚6-7 â”‚ â”‚8-9 â”‚ â”‚ NEW â”‚   SpreadThumbnailList  â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â•šâ•â•â•â•â• â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  (horizontal)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**State B: Grid Mode (viewMode: 'grid')**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš] â˜‘ Show full spread view                  â”€ â—â”€â”€â”€â”€â”€â”€ +   4  â”‚  â† Header (columns: 1-6)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   0-1   â”‚  â”‚   2-3   â”‚  â”‚   4-5   â”‚  â”‚   6-7   â”‚            â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚            â”‚
â”‚  â”‚ â”‚     â”‚ â”‚  â”‚ â”‚     â”‚ â”‚  â”‚ â”‚     â”‚ â”‚  â”‚ â”‚     â”‚ â”‚            â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â† SpreadGrid
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚    (columns adjustable)
â”‚  â”‚   8-9   â”‚  â”‚       +         â”‚  â† NewSpreadButton            â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚  â”‚    Add Spread   â”‚    (dummy mode only)          â”‚
â”‚  â”‚ â”‚     â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚                                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ManuscriptSpreadView                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Props: spreads[], mode, currentLanguage                                   â”‚  â”‚
â”‚  â”‚  State: viewMode, selectedSpreadIndex, zoomLevel, columnsPerRow            â”‚  â”‚
â”‚  â”‚  Callbacks: onSpreadSelect, onSpreadAdd, onSpreadUpdate, onSpreadReorder   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                              â”‚                              â”‚           â”‚
â”‚         â–¼                              â–¼                              â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SpreadViewHeader â”‚          â”‚  SpreadEditorPanel  â”‚        â”‚ SpreadThumbnailList â”‚ â”‚
â”‚  â”‚                  â”‚          â”‚  (edit mode only)   â”‚        â”‚                 â”‚ â”‚
â”‚  â”‚ Props:           â”‚          â”‚                     â”‚        â”‚ Props:          â”‚ â”‚
â”‚  â”‚ â€¢ viewMode       â”‚          â”‚ Props:              â”‚        â”‚ â€¢ spreads       â”‚ â”‚
â”‚  â”‚ â€¢ zoomLevel      â”‚          â”‚ â€¢ spread            â”‚        â”‚ â€¢ selectedIndex â”‚ â”‚
â”‚  â”‚ â€¢ columnsPerRow  â”‚          â”‚ â€¢ currentLanguage   â”‚        â”‚ â€¢ mode          â”‚ â”‚
â”‚  â”‚ â€¢ spreadViewMode â”‚          â”‚ â€¢ mode              â”‚        â”‚ â€¢ layout        â”‚ â”‚
â”‚  â”‚                  â”‚          â”‚ â€¢ zoomLevel         â”‚        â”‚ â€¢ columnsPerRow â”‚ â”‚
â”‚  â”‚ Callbacks:       â”‚          â”‚                     â”‚        â”‚                 â”‚ â”‚
â”‚  â”‚ â€¢ onViewModeToggleâ”‚          â”‚ Callbacks:          â”‚        â”‚ Callbacks:      â”‚ â”‚
â”‚  â”‚ â€¢ onZoomChange   â”‚          â”‚ â€¢ onSpreadUpdate    â”‚        â”‚ â€¢ onSpreadClick â”‚ â”‚
â”‚  â”‚ â€¢ onColumnsChangeâ”‚          â”‚                     â”‚        â”‚ â€¢ onAddSpread   â”‚ â”‚
â”‚  â”‚                  â”‚          â”‚                     â”‚        â”‚ â€¢ onDragEnd     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 Mode Comparison

| Feature | mode='dummy' | mode='finalize' |
|---------|--------------|-----------------|
| Data source | `manuscript.dummies[].spreads[]` | `snapshot.spreads[]` |
| Drag-drop reorder | âœ… Yes | âœ… Yes (NEW) |
| Click to edit | âœ… Yes (inline editor) | âœ… Yes (inline editor) |
| Add spread | âœ… Button visible | âŒ No button |
| Image display | `art_note` | `visual_description` |

---

## 2. Root Component Design

### 2.1 Overview

**Má»¥c Ä‘Ã­ch:** Unified spread view component cho cáº£ Dummy vÃ  Finalization steps. Hiá»ƒn thá»‹ spread grid/filmstrip vá»›i inline editor panel, thay tháº¿ modal-based editing.

**Key Changes tá»« Design cÅ©:**
1. Gá»™p `ManuscriptDummyView` vÃ  `ManuscriptFinalizationView` thÃ nh 1 component
2. Click spread â†’ hiá»ƒn thá»‹ inline `SpreadEditorPanel` thay vÃ¬ modal
3. Dual-purpose slider: Zoom (edit mode) hoáº·c Columns (grid mode)
4. Toggle checkbox "Show full spread view" cho grid mode
5. Finalization mode giá» cÅ©ng há»— trá»£ drag-drop reorder

**Shared Types:**

```typescript
type SpreadViewMode = 'dummy' | 'finalize';
type ViewMode = 'edit' | 'grid';

interface SpreadViewSpread {
  layout: string | null;
  left_page: { number: number; type: string; layout: string | null };
  right_page: { number: number; type: string; layout: string | null };
  images: SpreadViewImage[];
  textboxes: SpreadViewTextbox[];
}

interface SpreadViewImage {
  geometry: Geometry;
  art_note: string;
  visual_description?: string;
}

interface SpreadViewTextbox {
  id?: string;
  title?: string;
  [languageCode: string]: {
    text: string;
    geometry: Geometry;
    typography: Typography;
  } | string | undefined;
}
```

### 2.2 Interface

```typescript
interface ManuscriptSpreadViewProps {
  spreads: SpreadViewSpread[];
  mode: SpreadViewMode;
  currentLanguage: Language;

  // Callbacks
  onSpreadSelect?: (spreadIndex: number) => void;
  onSpreadAdd?: () => void;              // Not called in finalize mode
  onSpreadUpdate?: (spreadIndex: number, spread: SpreadViewSpread) => void;
  onSpreadReorder?: (oldIndex: number, newIndex: number) => void;
}

interface ManuscriptSpreadViewState {
  // Layout state
  viewMode: ViewMode;                    // 'edit' | 'grid'

  // Selection state
  selectedSpreadIndex: number | null;

  // View controls (dual-purpose slider)
  zoomLevel: number;                     // 25-200, default 100 (edit mode)
  columnsPerRow: number;                 // 1-6, default 4 (grid mode)

  // Drag state
  draggedIndex: number | null;
  dropTargetIndex: number | null;
}
```

### 2.3 Render Logic (pseudo)

```
ManuscriptSpreadView:
  IF spreads.length === 0:
    RENDER EmptyState vá»›i:
      - mode === 'dummy' â†’ "No spreads yet. Click + to add."
      - mode === 'finalize' â†’ "No spreads in snapshot."
    RETURN

  isEditable = mode === 'dummy' OR (mode === 'finalize' AND hasEditPermission)
  canAdd = mode === 'dummy'
  displayField = mode === 'dummy' ? 'art_note' : 'visual_description'

  RENDER SpreadViewHeader vá»›i:
    - viewMode
    - zoomLevel
    - columnsPerRow
    - spreadViewMode: mode
    - onViewModeToggle: () => toggleViewMode()
    - onZoomChange: (level) => setZoomLevel(level)
    - onColumnsChange: (cols) => setColumnsPerRow(cols)

  IF viewMode === 'edit':
    // Edit mode: Editor + Filmstrip layout (horizontal)
    IF selectedSpreadIndex !== null:
      selectedSpread = spreads[selectedSpreadIndex]
      RENDER SpreadEditorPanel vá»›i:
        - spread: selectedSpread
        - spreadIndex: selectedSpreadIndex
        - currentLanguage
        - mode
        - zoomLevel
        - isEditable
        - displayField
        - onSpreadUpdate: handleSpreadUpdate
    ELSE:
      RENDER EditorPlaceholder "Select a spread to edit"

    RENDER SpreadThumbnailList vá»›i:
      - spreads
      - selectedIndex: selectedSpreadIndex
      - currentLanguage
      - mode
      - displayField
      - layout: 'horizontal'  // Horizontal filmstrip
      - isDragEnabled: true
      - canAdd
      - onSpreadClick: handleSpreadClick
      - onAddSpread: canAdd ? onSpreadAdd : undefined
      - onDragEnd: handleDragEnd

  ELSE (viewMode === 'grid'):
    // Grid mode: Vertical grid with adjustable columns
    RENDER SpreadThumbnailList vá»›i:
      - spreads
      - selectedIndex: selectedSpreadIndex
      - currentLanguage
      - mode
      - displayField
      - layout: 'grid'  // Vertical grid
      - columnsPerRow
      - isDragEnabled: true
      - canAdd
      - onSpreadClick: handleSpreadClick
      - onAddSpread: canAdd ? onSpreadAdd : undefined
      - onDragEnd: handleDragEnd

  handleSpreadClick(index):
    setSelectedSpreadIndex(index)
    IF viewMode === 'grid':
      setViewMode('edit')  // Auto-switch to edit when clicking spread in grid
    onSpreadSelect?.(index)

  handleSpreadUpdate(updatedSpread):
    onSpreadUpdate?.(selectedSpreadIndex, updatedSpread)

  handleDragEnd(event):
    IF event.oldIndex !== event.newIndex:
      onSpreadReorder?.(event.oldIndex, event.newIndex)
    setDraggedIndex(null)
    setDropTargetIndex(null)

  toggleViewMode():
    setViewMode(viewMode === 'edit' ? 'grid' : 'edit')
    IF viewMode === 'grid' AND selectedSpreadIndex === null AND spreads.length > 0:
      setSelectedSpreadIndex(0)  // Auto-select first spread when entering edit
```

### 2.4 Visual

**Edit Mode (viewMode: 'edit'):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš]                                                      â”€ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ + 100%  â”‚
â”‚   â†‘ toggle icon                                             â””â†’ Zoom (25%-200%)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                â”‚                 SpreadEditorPanel               â”‚               â”‚
â”‚                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚               â”‚
â”‚                â”‚  â”‚     Left Page       â”‚     Right Page      â”‚ â”‚               â”‚
â”‚                â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                     â”‚ â”‚               â”‚
â”‚                â”‚  â”‚   â”‚  [Image]  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚               â”‚
â”‚                â”‚  â”‚   â”‚           â”‚     â”‚  â”‚  Textbox    â”‚    â”‚ â”‚               â”‚
â”‚                â”‚  â”‚   â”‚ "art_note"â”‚     â”‚  â”‚   â•”â•â•â•â•—     â”‚    â”‚ â”‚               â”‚
â”‚                â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚   â•‘ T â•‘     â”‚    â”‚ â”‚               â”‚
â”‚                â”‚  â”‚                     â”‚  â”‚   â•šâ•â•â•â•     â”‚    â”‚ â”‚               â”‚
â”‚                â”‚  â”‚     2               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  3 â”‚ â”‚               â”‚
â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚               â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•”â•â•â•â•â•â•â•â•â•â•—  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”  â”‚  â•‘  â”Œâ”€â”€â”€â”  â•‘  â”‚  â”Œâ”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”  â”‚  â”‚    +    â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚  â•‘  â”‚   â”‚  â•‘  â”‚  â”‚   â”‚  â”‚  â”‚  â”‚   â”‚  â”‚  â”‚  â”‚   â”‚  â”‚  â”‚   NEW   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”˜  â”‚  â•‘  â””â”€â”€â”€â”˜  â•‘  â”‚  â””â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”˜  â”‚  â”‚         â”‚  â”‚
â”‚  â”‚   0-1   â”‚  â•‘   2-3   â•‘  â”‚   4-5   â”‚  â”‚   6-7   â”‚  â”‚   8-9   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•šâ•â•â•â•â•â•â•â•â•â•  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â†‘ add      â”‚
â”‚                   â†‘ selected (blue border)                         (dummy mode)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Grid Mode (viewMode: 'grid'):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš] â˜‘ Show full spread view                              â”€ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ +   4  â”‚
â”‚   â†‘    â†‘ checkbox (uncheck to switch to edit)               â””â†’ Columns (1-6)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  0  â”‚  1    â”‚  â”‚  2  â”‚  3    â”‚  â”‚  4  â”‚  5    â”‚  â”‚  6  â”‚  7    â”‚            â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚  â”‚ â”‚"art    â”‚  â”‚  â”‚ â”‚"art    â”‚  â”‚  â”‚ â”‚"art    â”‚  â”‚  â”‚ â”‚"art    â”‚  â”‚            â”‚
â”‚  â”‚ â”‚note"   â”‚  â”‚  â”‚ â”‚note"   â”‚  â”‚  â”‚ â”‚note"   â”‚  â”‚  â”‚ â”‚note"   â”‚  â”‚            â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â”‚  â”‚     text    â”‚  â”‚     text    â”‚  â”‚     text    â”‚  â”‚     text    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚    Page 0-1         Page 2-3         Page 4-5         Page 6-7                  â”‚
â”‚       â†• drag-drop      â†•               â†•               â†•                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  8  â”‚  9    â”‚  â”‚                   â”‚                                        â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚        +          â”‚  â† NewSpreadButton (dummy mode only)   â”‚
â”‚  â”‚ â”‚"art    â”‚  â”‚  â”‚   Add New Spread  â”‚                                        â”‚
â”‚  â”‚ â”‚note"   â”‚  â”‚  â”‚                   â”‚                                        â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                               â”‚
â”‚    Page 8-9                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Finalize Mode (edit view):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš]                                                      â”€ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ + 100%  â”‚
â”‚                                                             â””â†’ Zoom (25%-200%)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚                              [...SpreadEditorPanel...]                          â”‚
â”‚                                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•”â•â•â•â•â•â•â•â•â•â•—  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”  â”‚  â•‘  â”Œâ”€â”€â”€â”  â•‘  â”‚  â”Œâ”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”  â”‚               â”‚
â”‚  â”‚  â”‚visâ”‚  â”‚  â•‘  â”‚visâ”‚  â•‘  â”‚  â”‚visâ”‚  â”‚  â”‚  â”‚visâ”‚  â”‚  â”‚  â”‚visâ”‚  â”‚ â† visual_desc â”‚
â”‚  â”‚  â””â”€â”€â”€â”˜  â”‚  â•‘  â””â”€â”€â”€â”˜  â•‘  â”‚  â””â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”˜  â”‚               â”‚
â”‚  â”‚   0-1   â”‚  â•‘   2-3   â•‘  â”‚   4-5   â”‚  â”‚   6-7   â”‚  â”‚   8-9   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•šâ•â•â•â•â•â•â•â•â•â•  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                         â†‘ No "Add" button in finalize mode      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **Note:** Translation is handled at EditorPage level via `TranslationNotAvailableDialog`.
> See [01-04-translation-not-available-dialog.md](component/editor-page/01-04-translation-not-available-dialog.md).

**Empty State:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš]                                                      â”€ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ + 100%  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚                                                                                 â”‚
â”‚                             ðŸ“„ No spreads yet                                   â”‚
â”‚                                                                                 â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                         â”‚          +          â”‚                                 â”‚
â”‚                         â”‚   Add First Spread  â”‚  â† dummy mode                   â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                                 â”‚
â”‚                         OR                                                      â”‚
â”‚                                                                                 â”‚
â”‚                         ðŸ“„ No spreads in snapshot                               â”‚
â”‚                         Run "Generate Art Direction"                            â”‚
â”‚                         to create spreads.          â† finalize mode             â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Child Components Interface

### 3.1 SpreadViewHeader

ðŸ“„ **Doc:** [03-03-01-spread-view-header.md](component/editor-page/03-03-01-spread-view-header.md)

**Má»¥c Ä‘Ã­ch:** Header toolbar vá»›i toggle button vÃ  dual-purpose slider (zoom/columns).

**Props & Callbacks:**

```typescript
interface SpreadViewHeaderProps {
  viewMode: ViewMode;                    // 'edit' | 'grid'
  zoomLevel: number;                     // 25-200, default 100 (edit mode only)
  columnsPerRow: number;                 // 1-6, default 4 (grid mode only)
  spreadViewMode: SpreadViewMode;        // 'dummy' | 'finalize'

  onViewModeToggle: () => void;
  onZoomChange: (level: number) => void;
  onColumnsChange: (columns: number) => void;
}
```

**Visual:**

```
Edit Mode:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš]                                                      â”€ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ + 100%  â”‚
â”‚   â†‘ toggle icon                                             â””â†’ Zoom (25%-200%)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Grid Mode:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš] â˜‘ Show full spread view                              â”€ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ +   4  â”‚
â”‚   â†‘    â†‘ checkbox (uncheck to exit grid)                    â””â†’ Columns (1-6)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 SpreadEditorPanel

ðŸ“„ **Doc:** [03-03-02-spread-editor-panel.md](component/editor-page/03-03-02-spread-editor-panel.md)

**Má»¥c Ä‘Ã­ch:** Inline editor panel cho selected spread, thay tháº¿ SpreadEditModal.

**Language impact:** âœ… **Bá»Š áº¢NH HÆ¯á»žNG** â€” Textbox content theo `currentLanguage.code`

**Props & Callbacks:**

```typescript
interface SpreadEditorPanelProps {
  spread: SpreadViewSpread;
  spreadIndex: number;
  currentLanguage: Language;
  mode: SpreadViewMode;
  zoomLevel: number;
  isEditable: boolean;
  displayField: 'art_note' | 'visual_description';

  onSpreadUpdate: (updatedSpread: SpreadViewSpread) => void;
}
```

**Visual:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SpreadEditorPanel                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                            SpreadCanvas                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚         Left Page           â”‚         Right Page          â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚                             â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”‚     Image       â”‚      â”‚      â”‚     Textbox     â”‚    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”‚                 â”‚      â”‚      â”‚                 â”‚    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚      â”‚    â•”â•â•â•â•â•â•â•â•—    â”‚    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”‚   â”‚"art_noteâ”‚   â”‚      â”‚      â”‚    â•‘   T   â•‘    â”‚    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”‚   â”‚  text"  â”‚   â”‚      â”‚      â”‚    â•šâ•â•â•â•â•â•â•â•    â”‚    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚      â”‚                 â”‚    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚                             â”‚            â”‚  â”‚
â”‚  â”‚  â”‚           2                 â”‚             3               â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  Features:                                                                      â”‚
â”‚  - Click image/textbox to select                                                â”‚
â”‚  - Drag to move elements                                                        â”‚
â”‚  - Resize handles on selected element                                           â”‚
â”‚  - Edit textbox content inline                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 SpreadThumbnailList

ðŸ“„ **Doc:** [03-03-03-spread-thumbnail-list.md](component/editor-page/03-03-03-spread-thumbnail-list.md)

**Má»¥c Ä‘Ã­ch:** Unified thumbnails container cho cáº£ horizontal filmstrip vÃ  vertical grid. CÃ¹ng actions, chá»‰ khÃ¡c scroll direction.

**Language impact:** âœ… **Bá»Š áº¢NH HÆ¯á»žNG** â€” Textbox preview theo `currentLanguage.code`

**Props & Callbacks:**

```typescript
type ThumbnailListLayout = 'horizontal' | 'grid';

interface SpreadThumbnailListProps {
  spreads: SpreadViewSpread[];
  selectedIndex: number | null;
  currentLanguage: Language;
  mode: SpreadViewMode;
  displayField: 'art_note' | 'visual_description';
  isDragEnabled: boolean;
  canAdd: boolean;

  // Layout configuration
  layout: ThumbnailListLayout;            // 'horizontal' = filmstrip, 'grid' = vertical
  columnsPerRow?: number;             // Only for grid layout, default 4

  onSpreadClick: (index: number) => void;
  onAddSpread?: () => void;
  onDragEnd: (event: { oldIndex: number; newIndex: number }) => void;
  onColumnsChange?: (columns: number) => void;  // Only for grid layout
}
```

**Visual (layout='horizontal'):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—€ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•”â•â•â•â•â•â•â•â•â•â•—  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â–¶ â”‚
â”‚    â”‚   0-1   â”‚  â•‘   2-3   â•‘  â”‚   4-5   â”‚  â”‚   6-7   â”‚  â”‚   8-9   â”‚  â”‚  NEW  â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•šâ•â•â•â•â•â•â•â•â•â•  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â†‘ selected                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Visual (layout='grid'):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚     0-1     â”‚  â”‚     2-3     â”‚  â”‚     4-5     â”‚  â”‚     6-7     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚     8-9     â”‚  â”‚       + NEW     â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                        â†“ vertical scroll                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 SpreadThumbnail (shared)

ðŸ“„ **Doc:** [03-03-05-spread-thumbnail.md](component/editor-page/03-03-05-spread-thumbnail.md)

**Má»¥c Ä‘Ã­ch:** Thumbnail preview cá»§a má»™t spread, dÃ¹ng chung cho cáº£ horizontal vÃ  grid layouts.

**Props & Callbacks:**

```typescript
interface SpreadThumbnailProps {
  spread: SpreadViewSpread;
  index: number;
  isSelected: boolean;
  currentLanguage: Language;
  displayField: 'art_note' | 'visual_description';
  isDragging?: boolean;
  isDropTarget?: boolean;
  isDragEnabled?: boolean;
  size?: 'small' | 'medium';  // small for horizontal, medium for grid

  onClick: () => void;
  onDragStart?: () => void;
  onDragOver?: () => void;
  onDragEnd?: () => void;
}
```

---

## 4. Technical Notes

### 4.1 Key Design Decisions

**Unified Component**
Gá»™p DummyView vÃ  FinalizationView thÃ nh 1 component vá»›i `mode` prop. LÃ½ do: Cáº£ 2 cÃ³ cÃ¹ng data structure (`spreads[]`), cÃ¹ng UI pattern, chá»‰ khÃ¡c behavior (editable vs read-only, translate).

**Inline Editor thay Modal**
Thay SpreadEditModal báº±ng SpreadEditorPanel inline. LÃ½ do: UX tá»‘t hÆ¡n, khÃ´ng bá»‹ context switch, dá»… so sÃ¡nh vá»›i filmstrip, responsive hÆ¡n.

**View Mode Toggle**
`viewMode` toggle giá»¯a 2 layouts:
- `'edit'`: Editor panel + horizontal filmstrip (default)
- `'grid'`: Grid view vá»›i adjustable columns

Toggle behavior:
- Edit mode: Click icon â†’ chuyá»ƒn sang grid
- Grid mode: Click icon hoáº·c uncheck "Show full spread view" â†’ chuyá»ƒn sang edit

**Dual-Purpose Slider**
Slider cÃ³ behavior khÃ¡c nhau dá»±a trÃªn viewMode:
- Edit mode: Controls zoom level (25%-200%) for SpreadCanvas
- Grid mode: Controls columns per row (1-6) for grid layout

LÃ½ do: Space-efficient UI, cÃ¹ng 1 slider phá»¥c vá»¥ 2 má»¥c Ä‘Ã­ch khÃ¡c nhau theo context.

**Finalization Mode Reorder**
Enable drag-drop reorder cho cáº£ finalize mode (trÆ°á»›c Ä‘Ã¢y readonly). LÃ½ do: User cáº§n flexibility Ä‘á»ƒ sáº¯p xáº¿p láº¡i spreads trÆ°á»›c khi export.

**Zoom Level**
Ãp dá»¥ng cho SpreadCanvas trong edit mode, khÃ´ng áº£nh hÆ°á»Ÿng Filmstrip/Grid thumbnails. LÃ½ do: Canvas cáº§n zoom Ä‘á»ƒ edit detail, thumbnails cáº§n consistent size Ä‘á»ƒ navigate.

> **Note:** Translation is handled at EditorPage level via `TranslationNotAvailableDialog`.
> See [01-04-translation-not-available-dialog.md](component/editor-page/01-04-translation-not-available-dialog.md).

### 4.2 Layout Calculations

```typescript
// Calculate layout heights
const HEADER_HEIGHT = 48;           // Fixed
const FILMSTRIP_HEIGHT = 120;       // Fixed when editor visible
const EDITOR_MIN_HEIGHT = 300;      // Minimum

function calculateEditorHeight(containerHeight: number): number {
  const available = containerHeight - HEADER_HEIGHT - FILMSTRIP_HEIGHT;
  return Math.max(EDITOR_MIN_HEIGHT, available);
}

// Filmstrip thumbnail size
const FILMSTRIP_THUMBNAIL_WIDTH = 100;
const FILMSTRIP_THUMBNAIL_HEIGHT = 80;

// Grid thumbnail size based on columns
function calculateGridThumbnailSize(containerWidth: number, columns: number, gap: number): number {
  return (containerWidth - (columns - 1) * gap) / columns;
}
```

### 4.3 State Persistence

```typescript
// Persist view preferences
const VIEW_PREFS_KEY = 'spread-view-prefs';

interface ViewPreferences {
  viewMode: ViewMode;                    // 'edit' | 'grid'
  zoomLevel: number;                     // 25-200
  columnsPerRow: number;                 // 1-6
}

function savePreferences(prefs: ViewPreferences) {
  localStorage.setItem(VIEW_PREFS_KEY, JSON.stringify(prefs));
}

function loadPreferences(): ViewPreferences {
  const stored = localStorage.getItem(VIEW_PREFS_KEY);
  return stored ? JSON.parse(stored) : {
    viewMode: 'edit',
    zoomLevel: 100,
    columnsPerRow: 4,
  };
}
```

### 4.4 Keyboard Shortcuts

| Key | Action |
|-----|--------|
| `â†` / `â†’` | Navigate to prev/next spread |
| `Home` / `End` | First/last spread |
| `G` | Toggle view mode (edit â†” grid) |
| `+` / `-` | Zoom in/out (edit mode) or adjust columns (grid mode) |
| `Delete` | Delete selected spread (with confirmation) |
| `Ctrl+Z` | Undo last change |

### 4.5 Accessibility

```typescript
// Filmstrip accessibility
const filmstripA11y = {
  role: 'listbox',
  'aria-label': 'Spread thumbnails',
  'aria-orientation': 'horizontal',
};

// Thumbnail accessibility
const thumbnailA11y = (index: number, isSelected: boolean) => ({
  role: 'option',
  'aria-selected': isSelected,
  'aria-label': `Spread ${index + 1}, pages ${index * 2}-${index * 2 + 1}`,
  tabIndex: isSelected ? 0 : -1,
});

// Editor panel accessibility
const editorA11y = {
  role: 'region',
  'aria-label': 'Spread editor',
  'aria-live': 'polite',
};
```

### 4.6 Migration Notes

**Deprecated Components:**
- `ManuscriptDummyView` â†’ replaced by `ManuscriptSpreadView` with `mode='dummy'`
- `ManuscriptFinalizationView` â†’ replaced by `ManuscriptSpreadView` with `mode='finalize'`
- `SpreadEditModal` â†’ replaced by `SpreadEditorPanel`
- `GridHeader` â†’ replaced by `SpreadViewHeader`
- `SpreadGrid` â†’ merged into `SpreadThumbnailList` with `layout='grid'`

**Parent Component Updates:**
`ManuscriptCreativeSpace` cáº§n update Ä‘á»ƒ sá»­ dá»¥ng `ManuscriptSpreadView` thay vÃ¬ 2 components cÅ©.
